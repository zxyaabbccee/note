# Androidè®°äº‹æœ¬åº”ç”¨å®éªŒæŠ¥ï¿?
## 1. é¡¹ç›®ç®€ï¿?
æœ¬å®éªŒåŸºäºAndroidå¹³å°å¼€å‘äº†ä¸€æ¬¾åŠŸèƒ½å®Œæ•´çš„è®°äº‹æœ¬åº”ç”¨ï¼Œæ—¨åœ¨æä¾›ä¾¿æ·çš„æ—¥å¸¸ç¬”è®°ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚è¯¥åº”ç”¨é‡‡ç”¨Javaè¯­è¨€å¼€å‘ï¼Œä½¿ç”¨SQLiteæ•°æ®åº“å­˜å‚¨æ•°æ®ï¼Œé€šè¿‡ContentProviderå®ç°æ•°æ®è®¿é—®çš„å°è£…ï¼Œéµå¾ªAndroidåº”ç”¨å¼€å‘çš„æœ€ä½³å®è·µã€‚åº”ç”¨å…·å¤‡ç¬”è®°çš„åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ã€æœç´¢ã€åˆ†ç±»ç®¡ç†ç­‰åŠŸèƒ½ï¼ŒåŒæ—¶æ”¯æŒå°†ç¬”è®°æ ‡è®°ä¸ºä»£åŠäº‹é¡¹å¹¶è®¾ç½®æˆªæ­¢æ—¶é—´ï¼Œä¸ºç”¨æˆ·æä¾›äº†å…¨æ–¹ä½çš„ç¬”è®°ç®¡ç†ä½“éªŒï¿½?
æœ¬é¡¹ç›®æ˜¯Androidå¼€å‘è¯¾ç¨‹çš„å®è·µä½œå“ï¼Œé€šè¿‡å®é™…å¼€å‘è¿‡ç¨‹å·©å›ºäº†Androidåº”ç”¨å¼€å‘çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼ŒåŒ…æ‹¬UIè®¾è®¡ã€æ•°æ®å­˜å‚¨ã€å†…å®¹æä¾›è€…ã€æ´»åŠ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ç­‰å…³é”®æŠ€æœ¯ï¿½?
## 2. åŠŸèƒ½æ¦‚è¿°

### 2.1 åŸºæœ¬åŠŸèƒ½

- **ç¬”è®°ç®¡ç†**ï¼šç”¨æˆ·å¯ä»¥åˆ›å»ºæ–°ç¬”è®°ã€ç¼–è¾‘ç°æœ‰ç¬”è®°å’Œåˆ é™¤ä¸éœ€è¦çš„ç¬”è®°(é•¿æŒ‰åˆ é™¤)
-![ç¬”è®°ç®¡ç†åŠŸèƒ½](notepad1/notepad1/screenshots/Pasted%20image%2020251202145151.png)
- **ç¬”è®°åˆ—è¡¨å±•ç¤º**ï¼šä»¥åˆ—è¡¨å½¢å¼å±•ç¤ºæ‰€æœ‰ç¬”è®°ï¼Œæ”¯æŒæ»šåŠ¨æµè§ˆ
-![ç¬”è®°åˆ—è¡¨å±•ç¤º](notepad1/screenshots/Pasted%20image%2020251202145117.png)
- **æ ‡é¢˜ä¸å†…å®¹ç¼–ï¿?*ï¼šä¸ºç¬”è®°æ·»åŠ æ ‡é¢˜å’Œè¯¦ç»†å†…ï¿?-![æ ‡é¢˜ä¸å†…å®¹ç¼–è¾‘](notepad1/screenshots/Pasted%20image%2020251202145251.png)


### 2.2 æ‰©å±•åŠŸèƒ½

- **ç¬”è®°åˆ†ç±»**ï¼šæ”¯æŒå°†ç¬”è®°åˆ†ä¸ºä¸åŒç±»åˆ«ï¼ˆå¦‚é»˜è®¤ã€å·¥ä½œã€å­¦ä¹ ã€ç”Ÿæ´»ç­‰ï¼‰ï¼Œä¸åŒåˆ†ç±»ä½¿ç”¨ä¸åŒé¢œè‰²æ ‡è¯†ï¼Œæ–¹ä¾¿ç”¨æˆ·å¿«é€Ÿè¯†ï¿?-![ç¬”è®°åˆ†ç±»](notepad1/screenshots/Pasted%20image%2020251202145305.png)
![åˆ†ç±»é¢œè‰²æ ‡è¯†](notepad1/screenshots/Pasted%20image%2020251202145402.png)
- **æœç´¢åŠŸèƒ½**ï¼šæ”¯æŒå®æ—¶æœç´¢ç¬”è®°æ ‡é¢˜å’Œå†…å®¹ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿå®šä½ç‰¹å®šç¬”ï¿?-![æœç´¢åŠŸèƒ½](notepad1/screenshots/Pasted%20image%2020251202145538.png)
- **æ—¶é—´æ˜¾ç¤º**ï¼šä»¥ç›¸å¯¹æ—¶é—´æ ¼å¼ï¼ˆåˆšåˆšã€Xåˆ†é’Ÿå‰ã€Xå°æ—¶å‰ã€æ˜¨å¤©ç­‰ï¼‰å±•ç¤ºç¬”è®°åˆ›å»ºæˆ–ä¿®æ”¹æ—¶é—´ï¼Œæä¾›æ›´åŠ ç›´è§‚çš„æ—¶é—´å‚ï¿½?- **ä»£åŠäº‹é¡¹æ ‡è®°**ï¼šæ”¯æŒå°†ç¬”è®°æ ‡è®°ä¸ºå¾…åŠäº‹é¡¹ï¼Œå¹¶å¯è®¾ç½®æˆªæ­¢æ—¶é—´
-![ä»£åŠäº‹é¡¹æ ‡è®°](notepad1/screenshots/Pasted%20image%2020251202145611.png)
![æˆªæ­¢æ—¶é—´è®¾ç½®](notepad1/screenshots/Pasted%20image%2020251202145624.png)
- **æ•°æ®å¯¼å‡ºä¸åˆ†ï¿?*ï¼šæ”¯æŒå°†ç¬”è®°å†…å®¹å¯¼å‡ºä¸ºæ–‡æœ¬æ–‡ä»¶æˆ–åˆ†äº«ç»™å…¶ä»–åº”ï¿?![æ•°æ®å¯¼å‡ºä¸åˆ†äº«](notepad1/screenshots/Pasted%20image%2020251202145637.png)
## 3. æŠ€æœ¯å®ç°è¯¦ï¿?
### 3.1 æ•°æ®å­˜å‚¨æ¶æ„

åº”ç”¨é‡‡ç”¨SQLiteæ•°æ®åº“è¿›è¡Œæœ¬åœ°æ•°æ®å­˜å‚¨ï¼Œå¹¶é€šè¿‡ContentProvideræ¨¡å¼å°è£…æ•°æ®è®¿é—®æ“ä½œï¼Œå®ç°äº†æ•°æ®å±‚ä¸ä¸šåŠ¡é€»è¾‘å±‚çš„è§£è€¦ã€‚è¯¥æ¶æ„æ”¯æŒæ•°æ®çš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼Œå¹¶æä¾›äº†ç‰ˆæœ¬å‡çº§æœºåˆ¶ä»¥æ”¯æŒæ–°åŠŸèƒ½çš„æ·»åŠ ï¿½?
#### æ•°æ®åº“è®¾ï¿?
æ•°æ®åº“åç§°ä¸º`NotePad.db`ï¼Œå½“å‰ç‰ˆæœ¬ä¸º3ã€‚æ•°æ®åº“ä¸­åŒ…å«ä¸€ä¸ªä¸»è¡¨`notes`ï¼Œç”¨äºå­˜å‚¨æ‰€æœ‰ç¬”è®°ä¿¡æ¯ã€‚è¡¨ç»“æ„å¦‚ä¸‹ï¿?
| å­—æ®µï¿?| æ•°æ®ç±»å‹ | è¯´æ˜ |
|--------|----------|------|
| _id | INTEGER | ç¬”è®°IDï¼Œä¸»é”®ï¼Œè‡ªåŠ¨å¢é•¿ï¼ˆContentProviderå¿…é¡»ï¿?|
| title | TEXT | ç¬”è®°æ ‡é¢˜ |
| content | TEXT | ç¬”è®°å†…å®¹ |
| create_time | TEXT | åˆ›å»ºæ—¶é—´ï¼ˆæ ¼å¼ï¼šyyyy-MM-dd HH:mm:ssï¿?|
| is_todo | INTEGER | æ˜¯å¦ä¸ºä»£åŠäº‹ï¿?0/1) |
| deadline | TEXT | æˆªæ­¢æ—¶é—´ï¼ˆæ ¼å¼ï¼šyyyy-MM-dd HH:mm:ssï¿?|
| category | TEXT | ç¬”è®°åˆ†ç±»ï¼Œé»˜è®¤ä¸º"é»˜è®¤" |

æ•°æ®åº“ç»å†äº†ä¸‰ä¸ªç‰ˆæœ¬çš„è¿­ä»£ï¼š
- ç‰ˆæœ¬1ï¼šåŸºç¡€ç¬”è®°åŠŸèƒ½ï¼ˆæ ‡é¢˜ã€å†…å®¹ï¼‰
- ç‰ˆæœ¬2ï¼šæ·»åŠ æ—¶é—´æˆ³åŠŸèƒ½ï¼ˆcreate_timeå­—æ®µï¿?- ç‰ˆæœ¬3ï¼šæ·»åŠ åˆ†ç±»å’Œä»£åŠäº‹é¡¹åŠŸèƒ½ï¼ˆcategoryã€is_todoã€deadlineå­—æ®µï¿?
#### ContentProviderå®ç°

ContentProvideræä¾›äº†ç»Ÿä¸€çš„URIæ ¼å¼ç”¨äºæ•°æ®è®¿é—®ï¿?
```
content://com.example.notepad.NotePadProvider/notes
content://com.example.notepad.NotePadProvider/notes/#
```

å…¶ä¸­ï¼Œ`#`è¡¨ç¤ºç‰¹å®šç¬”è®°çš„IDã€‚è¯¥ContentProviderå®ç°äº†å®Œæ•´çš„CRUDæ“ä½œï¼Œå¹¶æ”¯æŒä»¥ä¸‹é«˜çº§ç‰¹æ€§ï¼š

1. **æŸ¥è¯¢åŠŸèƒ½å¢å¼º**ï¼šæ”¯æŒæŒ‰æ ‡é¢˜ã€å†…å®¹æˆ–åˆ†ç±»è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢
2. **è‡ªåŠ¨å­—æ®µå¡«å……**ï¼šæ’å…¥æ–°ç¬”è®°æ—¶è‡ªåŠ¨æ·»åŠ å½“å‰æ—¶é—´å’Œé»˜è®¤åˆ†ç±»
3. **æ•°æ®å˜æ›´é€šçŸ¥**ï¼šä½¿ç”¨notifyChangeæœºåˆ¶é€šçŸ¥UIæ•°æ®æ›´æ–°
4. **å®‰å…¨çš„URIéªŒè¯**ï¼šä½¿ç”¨UriMatcheréªŒè¯URIæ ¼å¼çš„åˆæ³•ï¿½?
### 3.2 ç”¨æˆ·ç•Œé¢è®¾è®¡

åº”ç”¨ç•Œé¢é‡‡ç”¨Material Designè®¾è®¡é£æ ¼ï¼Œå¸ƒå±€ç»“æ„æ¸…æ™°ï¼Œäº¤äº’æµç•…ã€‚ä¸»è¦ç•Œé¢åŒ…æ‹¬ç¬”è®°åˆ—è¡¨ç•Œé¢å’Œç¬”è®°ç¼–è¾‘ç•Œé¢ï¿?
#### ç¬”è®°åˆ—è¡¨ç•Œé¢

ä½¿ç”¨RecyclerViewç»„ä»¶é«˜æ•ˆæ¸²æŸ“ç¬”è®°åˆ—è¡¨ï¼Œå®ç°äº†è§†å›¾å¤ç”¨å’Œå›æ”¶æœºåˆ¶ï¼Œæå‡äº†å¤§æ•°æ®é‡ä¸‹çš„æ€§èƒ½ã€‚åˆ—è¡¨é¡¹åŒ…å«æ ‡é¢˜ã€å†…å®¹é¢„è§ˆã€æ—¶é—´æˆ³å’Œåˆ†ç±»æ ‡ç­¾ï¼Œæä¾›äº†ç›´è§‚çš„ç¬”è®°æ¦‚è§ˆï¿?
#### ç¬”è®°ç¼–è¾‘ç•Œé¢

ç¼–è¾‘ç•Œé¢é‡‡ç”¨ç®€æ´çš„è¡¨å•å¸ƒå±€ï¼ŒåŒ…å«æ ‡é¢˜è¾“å…¥æ¡†ã€å†…å®¹è¾“å…¥æ¡†ã€åˆ†ç±»é€‰æ‹©å™¨ï¼ˆSpinnerï¼‰å’Œä»£åŠäº‹é¡¹è®¾ç½®åŒºåŸŸã€‚å¸ƒå±€ä½¿ç”¨ScrollViewç¡®ä¿åœ¨å°å±å¹•è®¾å¤‡ä¸Šä¹Ÿèƒ½å®Œæ•´æ˜¾ç¤ºæ‰€æœ‰ç¼–è¾‘é€‰é¡¹ï¿?
### 3.3 æ ¸å¿ƒåŠŸèƒ½å®ç°

#### ç¬”è®°CRUDæ“ä½œ

å®ç°äº†å®Œæ•´çš„ç¬”è®°å¢åˆ æ”¹æŸ¥æ“ä½œï¼Œé€šè¿‡ContentProvideræä¾›ç»Ÿä¸€æ¥å£ï¿?
- åˆ›å»ºç¬”è®°ï¼šé€šè¿‡ContentResolverçš„insertæ–¹æ³•æ’å…¥æ–°ç¬”ï¿?- è¯»å–ç¬”è®°ï¼šé€šè¿‡queryæ–¹æ³•è·å–ç¬”è®°åˆ—è¡¨æˆ–å•ä¸ªç¬”è®°è¯¦ï¿?- æ›´æ–°ç¬”è®°ï¼šé€šè¿‡updateæ–¹æ³•æ›´æ–°ç°æœ‰ç¬”è®°
- åˆ é™¤ç¬”è®°ï¼šé€šè¿‡deleteæ–¹æ³•åˆ é™¤ç¬”è®°

#### åˆ†ç±»ç®¡ç†åŠŸèƒ½

åˆ†ç±»ç®¡ç†åŠŸèƒ½é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¿?- **é¢„å®šä¹‰åˆ†ç±»æ•°ï¿?*ï¼šåœ¨NoteConstants.javaä¸­å®šä¹‰äº†å¸¸ç”¨åˆ†ç±»åˆ—è¡¨ï¼ŒåŒ…æ‹¬é»˜è®¤ã€å·¥ä½œã€å­¦ä¹ ã€ç”Ÿæ´»ã€å¤‡å¿˜å½•ã€çµæ„Ÿç­‰
- **åˆ†ç±»é€‰æ‹©æ§ä»¶**ï¼šåœ¨ç¬”è®°ç¼–è¾‘ç•Œé¢ä½¿ç”¨Spinnerç»„ä»¶æä¾›åˆ†ç±»é€‰æ‹©åŠŸèƒ½
- **åˆ†ç±»åˆå§‹ï¿?*ï¼šé€šè¿‡ArrayAdapterå°†é¢„å®šä¹‰åˆ†ç±»ç»‘å®šåˆ°Spinnerç»„ä»¶ï¼Œå¹¶è®¾ç½®é»˜è®¤é€‰ä¸­"é»˜è®¤"åˆ†ç±»
- **åˆ†ç±»ä¿å­˜**ï¼šåœ¨ä¿å­˜ç¬”è®°æ—¶ï¼Œå°†ç”¨æˆ·é€‰æ‹©çš„åˆ†ç±»å­˜å‚¨åˆ°æ•°æ®åº“çš„categoryå­—æ®µï¿?- **åˆ†ç±»åŠ è½½**ï¼šç¼–è¾‘ç¬”è®°æ—¶ï¼Œä¼šä»æ•°æ®åº“è¯»å–å·²æœ‰çš„åˆ†ç±»ä¿¡æ¯å¹¶åœ¨Spinnerä¸­è‡ªåŠ¨é€‰ä¸­
- **åˆ†ç±»ç›‘å¬**ï¼šä½¿ç”¨OnItemSelectedListenerç›‘å¬åˆ†ç±»é€‰æ‹©å˜åŒ–ï¼Œå¹¶å®æ—¶æ›´æ–°å½“å‰åˆ†ç±»å˜é‡

```java
// åˆ†ç±»åˆå§‹åŒ–æ ¸å¿ƒä»£ï¿?private void initCategorySpinner() {
    // è®¾ç½®åˆ†ç±»é€‚é…ï¿?    ArrayAdapter<String> adapter = new ArrayAdapter<>(this,
            android.R.layout.simple_spinner_item, NoteConstants.DEFAULT_CATEGORIES);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    mCategorySpinner.setAdapter(adapter);
    
    // é»˜è®¤é€‰æ‹©é»˜è®¤åˆ†ç±»
    for (int i = 0; i < NoteConstants.DEFAULT_CATEGORIES.length; i++) {
        if (NoteConstants.DEFAULT_CATEGORIES[i].equals(NoteConstants.DEFAULT_CATEGORY)) {
            mCategorySpinner.setSelection(i);
            break;
        }
    }
}
```

#### æ—¶é—´ç®¡ç†åŠŸèƒ½

åº”ç”¨å®ç°äº†ç¬”è®°çš„æ—¶é—´ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬åˆ›å»ºæ—¶é—´è®°å½•å’Œä»£åŠäº‹é¡¹æˆªæ­¢æ—¶é—´è®¾ç½®ï¿?- **åˆ›å»ºæ—¶é—´è®°å½•**ï¼šæ¯æ¡ç¬”è®°è‡ªåŠ¨è®°å½•åˆ›å»ºæ—¶é—´ï¼Œæ ¼å¼ï¿?yyyy-MM-dd HH:mm:ss"
- **æˆªæ­¢æ—¶é—´è®¾ç½®**ï¼šå¯¹äºä»£åŠäº‹é¡¹ï¼Œå¯ä»¥é€šè¿‡æ—¥æœŸé€‰æ‹©å™¨å’Œæ—¶é—´é€‰æ‹©å™¨è®¾ç½®æˆªæ­¢æ—¶ï¿?- **æ—¶é—´é€‰æ‹©UI**ï¼šä½¿ç”¨DatePickerDialogå’ŒTimePickerDialogæä¾›å‹å¥½çš„æ—¶é—´é€‰æ‹©ç•Œé¢
- **é»˜è®¤æ—¶é—´**ï¼šè®¾ç½®ä¸ºä»£åŠäº‹é¡¹æ—¶ï¼Œé»˜è®¤æˆªæ­¢æ—¶é—´ä¸ºå½“å‰æ—¶ï¿?1å°æ—¶
- **åŠ¨æ€UIæ§åˆ¶**ï¼šæ ¹æ®ä»£åŠäº‹é¡¹å¤é€‰æ¡†çš„çŠ¶æ€ï¼ŒåŠ¨æ€æ˜¾ç¤ºæˆ–éšè—æˆªæ­¢æ—¶é—´é€‰æ‹©åŒºåŸŸ

#### æœç´¢åŠŸèƒ½

æœç´¢åŠŸèƒ½å®ç°äº†é«˜çº§çš„å†…å®¹æ£€ç´¢æœºåˆ¶ï¼Œæ”¯æŒå¤šå­—æ®µæ¨¡ç³ŠæŸ¥è¯¢ï¼š
- **å¤šå­—æ®µæœï¿?*ï¼šæ”¯æŒåŒæ—¶æœç´¢ç¬”è®°çš„æ ‡é¢˜ã€å†…å®¹å’Œåˆ†ç±»å­—æ®µ
- **æ¨¡ç³ŠåŒ¹é…**ï¼šä½¿ç”¨SQLçš„LIKEè¯­å¥å’Œé€šé…ç¬¦ï¼ˆ%keyword%ï¼‰å®ç°å…³é”®è¯çš„æ¨¡ç³ŠåŒ¹ï¿?- **å®æ—¶è¿‡æ»¤**ï¼šè¾“å…¥å…³é”®è¯åå®æ—¶è¿‡æ»¤ç¬”è®°åˆ—ï¿?- **çµæ´»çš„URIè®¾è®¡**ï¼šé€šè¿‡ContentProviderçš„queryæ–¹æ³•æ”¯æŒå¤æ‚çš„æŸ¥è¯¢æ¡ï¿?
```java
// æœç´¢åŠŸèƒ½æ ¸å¿ƒå®ç°ï¼ˆåœ¨NotePadProvider.javaä¸­ï¼‰
@Override
public Cursor query(Uri uri, String[] projection, String selection,
                    String[] selectionArgs, String sortOrder) {
    SQLiteDatabase db = mDbHelper.getReadableDatabase();
    Cursor cursor;

    switch (sUriMatcher.match(uri)) {
        case NOTES:
            // å¤„ç†æŸ¥è¯¢ï¼šè‹¥æœ‰selectionåˆ™æŒ‰æ¡ä»¶æ¨¡ç³ŠæŸ¥è¯¢ï¼Œå¦åˆ™æŸ¥å…¨éƒ¨
            if (!TextUtils.isEmpty(selection)) {
                // æ‹¼æ¥æ¨¡ç³ŠæŸ¥è¯¢æ¡ä»¶ï¼ˆæ ‡é¢˜ã€å†…å®¹æˆ–åˆ†ç±»åŒ…å«å…³é”®è¯ï¼‰
                selection = "(" + NoteConstants.COLUMN_TITLE + " LIKE ?) OR (" +
                        NoteConstants.COLUMN_CONTENT + " LIKE ?) OR (" +
                        NoteConstants.COLUMN_CATEGORY + " LIKE ?)";
                // å…³é”®è¯å‰ååŠ %ï¼ˆæ”¯æŒä¸­é—´åŒ¹é…ï¼‰
                selectionArgs = new String[]{"%" + selectionArgs[0] + "%", "%" + selectionArgs[0] + "%", "%" + selectionArgs[0] + "%"};
            }
            cursor = db.query(NoteConstants.TABLE_NOTES, projection, selection,
                    selectionArgs, null, null,
                    TextUtils.isEmpty(sortOrder) ? NoteConstants.SORT_ORDER : sortOrder);
            break;
        // ... å…¶ä»–æƒ…å†µå¤„ç† ...
    }
    // ...
}

#### ç›¸å¯¹æ—¶é—´æ˜¾ç¤º

é€šè¿‡è®¡ç®—å½“å‰æ—¶é—´ä¸ç¬”è®°æ—¶é—´æˆ³çš„å·®å€¼ï¼Œæ™ºèƒ½åˆ¤æ–­å¹¶æ˜¾ç¤ºå‹å¥½çš„æ—¶é—´æ ¼å¼ï¿?- 1åˆ†é’Ÿå†…ï¼šæ˜¾ç¤º"åˆšåˆš"
- 1å°æ—¶å†…ï¼šæ˜¾ç¤º"Xåˆ†é’Ÿï¿?
- 24å°æ—¶å†…ï¼šæ˜¾ç¤º"Xå°æ—¶ï¿?
- æ˜¨å¤©ï¼šæ˜¾ï¿?æ˜¨å¤©"
- ä¸€å‘¨å†…ï¼šæ˜¾ï¿?Xå¤©å‰"
- æ›´æ—©ï¼šæ˜¾ç¤ºå…·ä½“æ—¥ï¿?
### 3.4 æ€§èƒ½ä¼˜åŒ–

- **æ•°æ®åº“ç´¢ï¿?*ï¼šä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µï¼ˆå¦‚categoryã€createdï¼‰åˆ›å»ºç´¢å¼•ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡
- **è§†å›¾å¤ç”¨**ï¼šä½¿ç”¨RecyclerViewçš„ViewHolderæ¨¡å¼å¤ç”¨åˆ—è¡¨é¡¹è§†ï¿?- **æœç´¢é˜²æŠ–**ï¼šä½¿ç”¨Handlerå®ç°æœç´¢å»¶è¿Ÿï¼Œå‡å°‘ä¸å¿…è¦çš„æ•°æ®åº“æŸ¥è¯¢
- **èµ„æºä¼˜åŒ–**ï¼šåˆç†ç®¡ç†å›¾ç‰‡èµ„æºï¼Œé¿å…å†…å­˜æµªè´¹

## 4. é¡¹ç›®ç»“æ„

é¡¹ç›®é‡‡ç”¨æ ‡å‡†çš„Androidåº”ç”¨æ¶æ„ï¼ŒåŸºäºGradleæ„å»ºç³»ç»Ÿï¼Œä¸»è¦åŒ…å«Javaå¼€å‘çš„ç»„ä»¶ã€‚é¡¹ç›®ç»“æ„æ¸…æ™°ï¼ŒæŒ‰åŠŸèƒ½å’Œç±»å‹è¿›è¡Œäº†åˆç†ç»„ç»‡ï¿½?
### 4.1 æ•´ä½“é¡¹ç›®ç»“æ„

```
NotePad/
 â”œâ”€â”€ app/                        # åº”ç”¨ä¸»æ¨¡ï¿? ï¿?  â”œâ”€â”€ src/main/               # ä¸»æºä»£ç ç›®å½•
 ï¿?  ï¿?  â”œâ”€â”€ AndroidManifest.xml # åº”ç”¨é…ç½®æ–‡ä»¶
 ï¿?  ï¿?  â”œâ”€â”€ java/com/example/notepad/  # Javaä»£ç åŒ…ç»“ï¿? ï¿?  ï¿?  â””â”€â”€ res/                # èµ„æºæ–‡ä»¶ç›®å½•
 ï¿?  â”œâ”€â”€ build.gradle            # æ¨¡å—çº§æ„å»ºé…ï¿? ï¿?  â””â”€â”€ proguard-rules.pro      # æ··æ·†è§„åˆ™
 â”œâ”€â”€ screenshots/                # åº”ç”¨æˆªå›¾ç›®å½•
 â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

### 4.2 Javaä»£ç åŒ…ç»“ï¿?
```
com.example.notepad/
â”œâ”€â”€ NoteAdapter.java        # ç¬”è®°åˆ—è¡¨é€‚é…å™¨ï¼Œç®¡ç†åˆ—è¡¨é¡¹æ˜¾ï¿?â”œâ”€â”€ NoteApplication.java    # åº”ç”¨ç¨‹åºç±»ï¼Œåˆå§‹åŒ–åº”ç”¨ç¯ï¿?â”œâ”€â”€ NoteConstants.java      # å¸¸é‡å®šä¹‰ç±»ï¼Œå­˜å‚¨æ•°æ®åº“å­—æ®µç­‰
â”œâ”€â”€ NoteDbHelper.java       # æ•°æ®åº“å¸®åŠ©ç±»ï¼Œç®¡ç†æ•°æ®åº“åˆ›å»ºå’Œç‰ˆæœ¬å‡ï¿?â”œâ”€â”€ NoteEditor.java         # ç¬”è®°ç¼–è¾‘Activityï¼Œå¤„ç†ç”¨æˆ·è¾“å…¥å’Œæ•°æ®ä¿å­˜
â”œâ”€â”€ NoteList.java           # ç¬”è®°åˆ—è¡¨Activityï¼Œæ˜¾ç¤ºæ‰€æœ‰ç¬”è®°å’Œæœç´¢åŠŸèƒ½
â””â”€â”€ NotePadProvider.java    # å†…å®¹æä¾›è€…ï¼Œå®ç°æ•°æ®CRUDæ“ä½œ
```

### 4.3 èµ„æºæ–‡ä»¶ç»“æ„

```
res/
â”œâ”€â”€ drawable/              # è‡ªå®šä¹‰ç»˜åˆ¶èµ„ï¿?â”œâ”€â”€ layout/                # ç•Œé¢å¸ƒå±€æ–‡ä»¶
ï¿?  â”œâ”€â”€ note_editor.xml    # ç¬”è®°ç¼–è¾‘ç•Œé¢
ï¿?  â”œâ”€â”€ note_item.xml      # ç¬”è®°åˆ—è¡¨ï¿?ï¿?  â””â”€â”€ note_list.xml      # ç¬”è®°åˆ—è¡¨ç•Œé¢
â”œâ”€â”€ menu/                  # èœå•å®šä¹‰
ï¿?  â”œâ”€â”€ note_editor_menu.xml # ç¼–è¾‘ç•Œé¢èœå•
ï¿?  â””â”€â”€ note_list_menu.xml    # åˆ—è¡¨ç•Œé¢èœå•
â”œâ”€â”€ values/                # å€¼èµ„ï¿?ï¿?  â”œâ”€â”€ colors.xml         # é¢œè‰²å®šä¹‰
ï¿?  â”œâ”€â”€ strings.xml        # å­—ç¬¦ä¸²å®šï¿?ï¿?  â””â”€â”€ styles.xml         # æ ·å¼å®šä¹‰
â””â”€â”€ xml/                   # XMLé…ç½®æ–‡ä»¶
```

### 4.4 ç±»åŠŸèƒ½è¯´ï¿?
| ç±»å | ä¸»è¦èŒè´£ | æ–‡ä»¶ä½ç½® |
|------|----------|----------|
| NoteDbHelper | æ•°æ®åº“å¸®åŠ©ç±»ï¼Œç®¡ç†æ•°æ®åº“åˆ›å»ºå’Œç‰ˆæœ¬å‡ï¿?| java/com/example/notepad/ |
| NotePadProvider | å†…å®¹æä¾›è€…ï¼Œå®ç°æ•°æ®CRUDæ“ä½œï¼Œæ”¯æŒå¤šå­—æ®µæ¨¡ç³ŠæŸ¥è¯¢ | java/com/example/notepad/ |
| NoteEditor | ç¬”è®°ç¼–è¾‘Activityï¼Œå¤„ç†ç”¨æˆ·è¾“å…¥ã€åˆ†ç±»é€‰æ‹©å’Œä»£åŠäº‹é¡¹è®¾ï¿?| java/com/example/notepad/ |
| NoteList | ç¬”è®°åˆ—è¡¨Activityï¼Œæ˜¾ç¤ºæ‰€æœ‰ç¬”è®°ã€æœç´¢å’Œåˆ†ç±»ç­›é€‰åŠŸï¿?| java/com/example/notepad/ |
| NoteAdapter | ç¬”è®°åˆ—è¡¨é€‚é…å™¨ï¼Œç®¡ç†åˆ—è¡¨é¡¹çš„æ˜¾ç¤ºï¼ŒåŒ…æ‹¬åˆ†ç±»æ ‡ç­¾å’Œå¾…åŠæ ‡è®° | java/com/example/notepad/ |
| NoteConstants | å¸¸é‡å®šä¹‰ç±»ï¼Œå­˜å‚¨æ•°æ®åº“å­—æ®µã€åˆ†ç±»åˆ—è¡¨å’Œé»˜è®¤å€¼ç­‰ | java/com/example/notepad/ |
| NoteApplication | åº”ç”¨ç¨‹åºç±»ï¼Œåˆå§‹åŒ–åº”ç”¨ç¯å¢ƒå’Œç»„ä»¶ | java/com/example/notepad/ |

## 5. æ ¸å¿ƒæŠ€æœ¯ç‚¹

### 5.1 ContentProvideræ¨¡å¼

ContentProvideræ˜¯Androidå››å¤§ç»„ä»¶ä¹‹ä¸€ï¼Œç”¨äºåº”ç”¨é—´æ•°æ®å…±äº«å’Œè®¿é—®ã€‚æœ¬é¡¹ç›®é€šè¿‡ContentProviderå°è£…äº†æ‰€æœ‰æ•°æ®åº“æ“ä½œï¼Œæä¾›æ ‡å‡†åŒ–çš„CRUDæ¥å£ï¼Œå®ç°äº†å…³æ³¨ç‚¹åˆ†ç¦»å’Œä»£ç è§£è€¦ï¿½?
### 5.2 SQLiteæ•°æ®åº“æ“ï¿?
é¡¹ç›®ä½¿ç”¨Androidå†…ç½®çš„SQLiteæ•°æ®åº“å­˜å‚¨ç¬”è®°æ•°æ®ã€‚é€šè¿‡SQLiteOpenHelperå®ç°æ•°æ®åº“çš„åˆ›å»ºå’Œç‰ˆæœ¬ç®¡ç†ï¼Œé€šè¿‡SQLiteDatabaseæ‰§è¡Œå…·ä½“çš„SQLæ“ä½œï¿?
### 5.3 RecyclerViewåˆ—è¡¨ä¼˜åŒ–

RecyclerViewç›¸æ¯”ä¼ ç»Ÿçš„ListViewå…·æœ‰æ›´ä¼˜çš„æ€§èƒ½ï¼Œé€šè¿‡è§†å›¾å¤ç”¨å’Œå›æ”¶æœºåˆ¶å‡å°‘å†…å­˜å ç”¨ï¼Œæå‡æ¸²æŸ“æ•ˆç‡ã€‚ç»“åˆViewHolderæ¨¡å¼å’Œæ•°æ®ç»‘å®šæŠ€æœ¯ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–äº†åˆ—è¡¨æ€§èƒ½ï¿?
### 5.4 æ´»åŠ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†

æ­£ç¡®å¤„ç†Activityçš„ç”Ÿå‘½å‘¨æœŸæ˜¯Androidå¼€å‘çš„å…³é”®ã€‚é¡¹ç›®ä¸­å®ç°äº†onCreateã€onPauseã€onResumeã€onDestroyç­‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œç¡®ä¿æ•°æ®ä¿å­˜å’Œèµ„æºé‡Šæ”¾ï¿½?
### 5.5 Intenté€šä¿¡

ä½¿ç”¨Intentè¿›è¡ŒActivityä¹‹é—´çš„é€šä¿¡å’Œæ•°æ®ä¼ é€’ï¼Œå®ç°äº†ç¬”è®°åˆ—è¡¨åˆ°ç¼–è¾‘å™¨çš„è·³è½¬ï¼Œä»¥åŠç¬”è®°æ•°æ®çš„ä¼ é€’ï¿½?
## 6. ä½¿ç”¨è¯´æ˜

### 6.1 å®‰è£…ä¸é…ï¿?
1. **å¼€å‘ç¯å¢ƒè¦ï¿?*ï¿?   - Android Studio 4.0æˆ–æ›´é«˜ç‰ˆï¿?   - JDK 8æˆ–æ›´é«˜ç‰ˆï¿?   - Android SDK 21 (Android 5.0)æˆ–æ›´é«˜ç‰ˆï¿?
2. **æ„å»ºä¸è¿ï¿?*ï¿?   - åœ¨Android Studioä¸­æ‰“å¼€é¡¹ç›®
   - ç­‰å¾…GradleåŒæ­¥å®Œæˆ
   - è¿æ¥Androidè®¾å¤‡æˆ–å¯åŠ¨æ¨¡æ‹Ÿå™¨
   - ç‚¹å‡»è¿è¡ŒæŒ‰é’®

### 6.2 åŸºæœ¬æ“ä½œæŒ‡å—

#### åˆ›å»ºæ–°ç¬”ï¿?1. å¯åŠ¨åº”ç”¨åï¼Œè¿›å…¥ç¬”è®°åˆ—è¡¨ç•Œé¢
2. ç‚¹å‡»å³ä¸Šè§’çš„**æ–°å»º**æŒ‰é’®ï¿?+"å·å›¾æ ‡ï¼‰
3. åœ¨ç¼–è¾‘ç•Œé¢ä¸­è¾“å…¥ç¬”è®°æ ‡é¢˜å’Œå†…ï¿?4. ä»åˆ†ç±»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©åˆé€‚çš„åˆ†ç±»ï¼ˆé»˜è®¤ä¸º"é»˜è®¤"åˆ†ç±»ï¿?5. å¦‚éœ€è®¾ç½®ä¸ºå¾…åŠäº‹é¡¹ï¼Œå‹¾ï¿½?è®¾ä¸ºå¾…åŠ"å¤é€‰æ¡†å¹¶è®¾ç½®æˆªæ­¢æ—¶ï¿?6. ç‚¹å‡»å³ä¸Šè§’çš„**ä¿å­˜**æŒ‰é’®ä¿å­˜ç¬”è®°

#### ç¼–è¾‘ç°æœ‰ç¬”è®°
1. åœ¨ç¬”è®°åˆ—è¡¨ç•Œé¢æ‰¾åˆ°éœ€è¦ç¼–è¾‘çš„ç¬”è®°
2. ç‚¹å‡»è¯¥ç¬”è®°é¡¹è¿›å…¥ç¼–è¾‘ç•Œé¢
3. ä¿®æ”¹æ ‡é¢˜ã€å†…å®¹æˆ–åˆ†ç±»ä¿¡æ¯
4. å¦‚æœ‰éœ€è¦ï¼Œä¿®æ”¹å¾…åŠçŠ¶æ€å’Œæˆªæ­¢æ—¶é—´
5. ç‚¹å‡»å³ä¸Šè§’çš„**ä¿å­˜**æŒ‰é’®æ›´æ–°ç¬”è®°

#### åˆ é™¤ç¬”è®°
1. åœ¨ç¬”è®°åˆ—è¡¨ç•Œé¢æ‰¾åˆ°éœ€è¦åˆ é™¤çš„ç¬”è®°
2. é•¿æŒ‰è¯¥ç¬”è®°é¡¹ï¼Œå¼¹å‡ºæ“ä½œèœï¿?3. ä»èœå•ä¸­é€‰æ‹©**åˆ é™¤**é€‰é¡¹
4. åœ¨ç¡®è®¤å¯¹è¯æ¡†ä¸­ç‚¹ï¿?*ç¡®å®š**å®Œæˆåˆ é™¤

#### æœç´¢ç¬”è®°
1. åœ¨ç¬”è®°åˆ—è¡¨ç•Œé¢é¡¶éƒ¨çš„æœç´¢æ¡†ä¸­è¾“å…¥å…³é”®ï¿?2. ç³»ç»Ÿä¼šå®æ—¶åŒ¹é…ç¬”è®°çš„æ ‡é¢˜ã€å†…å®¹æˆ–åˆ†ç±»ä¸­åŒ…å«è¯¥å…³é”®è¯çš„ç¬”è®°
3. æœç´¢ç»“æœä¼šè‡ªåŠ¨æ›´æ–°åˆ°åˆ—è¡¨ä¸­æ˜¾ï¿?4. æ¸…ç©ºæœç´¢æ¡†å¯æ¢å¤æ˜¾ç¤ºæ‰€æœ‰ç¬”ï¿?
#### åˆ†ç±»ç­›ï¿½?1. åœ¨ç¬”è®°åˆ—è¡¨ç•Œé¢ç‚¹å‡»èœå•æŒ‰ï¿?2. é€‰æ‹©"åˆ†ç±»ç­›ï¿½?é€‰é¡¹
3. ä»å¼¹å‡ºçš„åˆ†ç±»åˆ—è¡¨ä¸­é€‰æ‹©è¦æŸ¥çœ‹çš„åˆ†ç±»
4. åˆ—è¡¨ä¼šæ›´æ–°æ˜¾ç¤ºæ‰€é€‰åˆ†ç±»çš„ç¬”è®°
5. é€‰æ‹©"å…¨éƒ¨"å¯æ¢å¤æ˜¾ç¤ºæ‰€æœ‰åˆ†ç±»çš„ç¬”è®°

### 6.3 é«˜çº§åŠŸèƒ½ä½¿ç”¨è¯´æ˜

#### åˆ†ç±»ç®¡ç†åŠŸèƒ½
1. **é€‰æ‹©åˆ†ç±»**ï¿?   - åœ¨ç¬”è®°ç¼–è¾‘ç•Œé¢ï¼Œç‚¹å‡»åˆ†ç±»ä¸‹æ‹‰ï¿?   - ä»å¼¹å‡ºçš„åˆ†ç±»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„åˆ†ç±»ï¼ˆé»˜è®¤ã€å·¥ä½œã€å­¦ä¹ ã€ç”Ÿæ´»ã€å¤‡å¿˜å½•ã€çµæ„Ÿï¼‰

2. **åˆ†ç±»æ˜¾ç¤º**ï¿?   - ç¬”è®°åˆ—è¡¨ä¸­çš„æ¯ä¸ªç¬”è®°é¡¹éƒ½ä¼šæ˜¾ç¤ºå¯¹åº”çš„åˆ†ç±»æ ‡ç­¾
   - ä¸åŒåˆ†ç±»çš„ç¬”è®°æœ‰ä¸åŒé¢œè‰²æ ‡è¯†ï¼Œä¾¿äºå¿«é€Ÿè¯†ï¿?
#### å¾…åŠäº‹é¡¹ç®¡ç†
1. **æ ‡è®°ä¸ºå¾…ï¿?*ï¿?   - åœ¨ç¬”è®°ç¼–è¾‘ç•Œé¢ï¼Œå‹¾ï¿½?è®¾ä¸ºå¾…åŠ"å¤é€‰æ¡†
   - æˆªæ­¢æ—¶é—´é€‰æ‹©åŒºåŸŸä¼šè‡ªåŠ¨æ˜¾ï¿?
2. **è®¾ç½®æˆªæ­¢æ—¶é—´**ï¿?   - ç‚¹å‡»æˆªæ­¢æ—¶é—´åŒºåŸŸï¼Œé€‰æ‹©æ—¥æœŸå’Œæ—¶ï¿?   - ç³»ç»Ÿé»˜è®¤è®¾ç½®ä¸ºå½“å‰æ—¶é—´å1å°æ—¶

3. **å¾…åŠæ ‡è®°**ï¿?   - å¾…åŠäº‹é¡¹åœ¨åˆ—è¡¨ä¸­ä¼šæ˜¾ç¤ºç‰¹æ®Šçš„æ ‡è®°
   - åŒ…å«æˆªæ­¢æ—¶é—´ä¿¡æ¯ï¼Œä¾¿äºä¼˜å…ˆå¤„ç†å³å°†åˆ°æœŸçš„ä»»åŠ¡

#### æ—¶é—´æ˜¾ç¤ºåŠŸèƒ½
1. **åˆ›å»ºæ—¶é—´**ï¿?   - æ¯æ¡ç¬”è®°è‡ªåŠ¨è®°å½•åˆ›å»ºæ—¶é—´
   - åœ¨åˆ—è¡¨ä¸­æ˜¾ç¤ºä¸ºç›¸å¯¹æ—¶é—´ï¼ˆï¿?åˆšåˆš"ï¿?5åˆ†é’Ÿï¿?ï¿?2å°æ—¶ï¿?ï¿?æ˜¨å¤©"ï¿?
2. **æˆªæ­¢æ—¶é—´**ï¿?   - ä»…å¾…åŠäº‹é¡¹æ˜¾ç¤ºæˆªæ­¢æ—¶ï¿?   - æˆªæ­¢æ—¶é—´ä¹Ÿä»¥ç›¸å¯¹æ—¶é—´å½¢å¼æ˜¾ç¤ºï¼Œæ–¹ä¾¿åˆ¤æ–­ç´§æ€¥ç¨‹ï¿?
### 6.4 ä½¿ç”¨å»ºè®®

- **åˆ†ç±»ä½¿ç”¨**ï¼šä¸ºä¸åŒç”¨é€”çš„ç¬”è®°é€‰æ‹©åˆé€‚çš„åˆ†ç±»ï¼Œä¾¿äºåç»­æŸ¥æ‰¾å’Œç®¡ç†
- **å¾…åŠäº‹é¡¹**ï¼šå¯¹äºéœ€è¦æé†’çš„ä»»åŠ¡ï¼Œå»ºè®®è®¾ç½®ä¸ºå¾…åŠäº‹é¡¹å¹¶è®¾ç½®åˆç†çš„æˆªæ­¢æ—¶é—´
- **æœç´¢åŠŸèƒ½**ï¼šåœ¨ç¬”è®°æ•°é‡è¾ƒå¤šæ—¶ï¼Œä½¿ç”¨æœç´¢åŠŸèƒ½å¯ä»¥å¿«é€Ÿå®šä½éœ€è¦çš„ç¬”è®°
- **å®šæœŸæ¸…ç†**ï¼šå®šæœŸæ•´ç†å’Œåˆ é™¤ä¸å†éœ€è¦çš„ç¬”è®°ï¼Œä¿æŒç¬”è®°åˆ—è¡¨çš„æ•´æ´

## 7. æµ‹è¯•å»ºè®®

### 7.1 åŠŸèƒ½æµ‹è¯•ç”¨ä¾‹

#### åŸºæœ¬ç¬”è®°æ“ä½œæµ‹è¯•
1. **ç¬”è®°åˆ›å»ºåŠŸèƒ½**
   - **æµ‹è¯•ï¿?**ï¼šåˆ›å»ºæ ‡é¢˜å’Œå†…å®¹éƒ½ä¸ä¸ºç©ºçš„ç¬”ï¿?   - **æµ‹è¯•ï¿?**ï¼šåˆ›å»ºåªæœ‰æ ‡é¢˜æ²¡æœ‰å†…å®¹çš„ç¬”è®°
   - **æµ‹è¯•ï¿?**ï¼šåˆ›å»ºè¶…é•¿æ ‡é¢˜å’Œå†…å®¹ï¼ˆæ¥è¿‘ç³»ç»Ÿé™åˆ¶ï¼‰
   - **æµ‹è¯•ï¿?**ï¼šåˆ›å»ºåŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚emojiã€ç¬¦å·ï¼‰çš„ç¬”ï¿?   - **é¢„æœŸç»“æœ**ï¼šæ‰€æœ‰ç¬”è®°éƒ½èƒ½æˆåŠŸä¿å­˜å¹¶åœ¨åˆ—è¡¨ä¸­æ­£ç¡®æ˜¾ç¤º

2. **ç¬”è®°ç¼–è¾‘åŠŸèƒ½**
   - **æµ‹è¯•ï¿?**ï¼šä¿®æ”¹ç¬”è®°æ ‡ï¿?   - **æµ‹è¯•ï¿?**ï¼šä¿®æ”¹ç¬”è®°å†…ï¿?   - **æµ‹è¯•ï¿?**ï¼šä¿®æ”¹ç¬”è®°åˆ†ï¿?   - **æµ‹è¯•ï¿?**ï¼šä¿®æ”¹å¾…åŠçŠ¶æ€å’Œæˆªæ­¢æ—¶é—´
   - **æµ‹è¯•ï¿?**ï¼šç¼–è¾‘åä¸ä¿å­˜ç›´æ¥è¿”ï¿?   - **é¢„æœŸç»“æœ**ï¼šä¿®æ”¹åçš„ç¬”è®°æ­£ç¡®ä¿å­˜ï¼Œæœªä¿å­˜æ—¶åº”æç¤ºç”¨ï¿?
3. **ç¬”è®°åˆ é™¤åŠŸèƒ½**
   - **æµ‹è¯•ï¿?**ï¼šé•¿æŒ‰åˆ é™¤å•æ¡ç¬”ï¿?   - **æµ‹è¯•ï¿?**ï¼šåˆ é™¤æ“ä½œå–æ¶ˆç¡®ï¿?   - **æµ‹è¯•ï¿?**ï¼šåˆ é™¤åæœç´¢å·²åˆ é™¤ç¬”ï¿?   - **é¢„æœŸç»“æœ**ï¼šç¬”è®°æˆåŠŸåˆ é™¤ï¼Œåˆ—è¡¨æ­£ç¡®æ›´æ–°ï¼Œåˆ é™¤åæ— æ³•æœç´¢ï¿?
#### é«˜çº§åŠŸèƒ½æµ‹è¯•
4. **æœç´¢åŠŸèƒ½æµ‹è¯•**
   - **æµ‹è¯•ï¿?**ï¼šæœç´¢æ ‡é¢˜ä¸­åŒ…å«çš„å…³é”®è¯
   - **æµ‹è¯•ï¿?**ï¼šæœç´¢å†…å®¹ä¸­åŒ…å«çš„å…³é”®è¯
   - **æµ‹è¯•ï¿?**ï¼šæœç´¢åˆ†ç±»åï¿?   - **æµ‹è¯•ï¿?**ï¼šæœç´¢ä¸å­˜åœ¨çš„å…³é”®è¯
   - **æµ‹è¯•ï¿?**ï¼šç©ºæœç´¢æ¡†ï¼ˆåº”æ˜¾ç¤ºæ‰€æœ‰ç¬”è®°ï¼‰
   - **æµ‹è¯•ï¿?**ï¼šç‰¹æ®Šå­—ç¬¦æœï¿?   - **é¢„æœŸç»“æœ**ï¼šæœç´¢ç»“æœå‡†ç¡®åŒ¹é…ï¼Œå®æ—¶æ›´æ–°

5. **åˆ†ç±»åŠŸèƒ½æµ‹è¯•**
   - **æµ‹è¯•ï¿?**ï¼šä¸ºç¬”è®°é€‰æ‹©ä¸åŒé¢„å®šä¹‰åˆ†ï¿?   - **æµ‹è¯•ï¿?**ï¼šåˆ›å»ºå¤šä¸ªåŒåˆ†ç±»çš„ç¬”ï¿?   - **æµ‹è¯•ï¿?**ï¼šæŒ‰åˆ†ç±»ç­›é€‰æŸ¥çœ‹ç¬”ï¿?   - **é¢„æœŸç»“æœ**ï¼šåˆ†ç±»è®¾ç½®æ­£ç¡®ï¼Œç­›é€‰åŠŸèƒ½æ­£å¸¸å·¥ï¿?
6. **å¾…åŠäº‹é¡¹åŠŸèƒ½æµ‹è¯•**
   - **æµ‹è¯•ï¿?**ï¼šåˆ›å»ºå¸¦æˆªæ­¢æ—¶é—´çš„å¾…åŠäº‹ï¿?   - **æµ‹è¯•ï¿?**ï¼šåˆ›å»ºä¸å¸¦æˆªæ­¢æ—¶é—´çš„å¾…åŠäº‹é¡¹
   - **æµ‹è¯•ï¿?**ï¼šä¿®æ”¹å¾…åŠäº‹é¡¹çš„æˆªæ­¢æ—¶é—´
   - **æµ‹è¯•ï¿?**ï¼šå°†å¾…åŠäº‹é¡¹æ”¹ä¸ºæ™®é€šç¬”ï¿?   - **é¢„æœŸç»“æœ**ï¼šå¾…åŠçŠ¶æ€å’Œæ—¶é—´è®¾ç½®æ­£ç¡®ï¼ŒUIæ˜¾ç¤ºç¬¦åˆé¢„æœŸ

### 7.2 æ€§èƒ½å’Œå…¼å®¹æ€§æµ‹ï¿?
1. **æ€§èƒ½æµ‹è¯•**
   - **æµ‹è¯•ï¿?**ï¼šåˆ›å»ºå¹¶æ˜¾ç¤º100æ¡ä»¥ä¸Šç¬”è®°çš„åŠ è½½æ€§èƒ½
   - **æµ‹è¯•ï¿?**ï¼šå¤§é‡ç¬”è®°ä¸‹çš„æœç´¢å“åº”é€Ÿåº¦
   - **æµ‹è¯•ï¿?**ï¼šé¢‘ç¹åˆ‡æ¢ç•Œé¢æ—¶çš„å†…å­˜å ï¿?   - **æµ‹è¯•ï¿?**ï¼šåº”ç”¨å¯åŠ¨æ—¶é—´æµ‹ï¿?   - **é¢„æœŸç»“æœ**ï¼šåº”ç”¨è¿è¡Œæµç•…ï¼Œæ— æ˜æ˜¾å¡é¡¿ï¼Œå†…å­˜å ç”¨åˆç†

2. **å…¼å®¹æ€§æµ‹ï¿?*
   - **æµ‹è¯•ï¿?**ï¼šåœ¨Android 7.0, 8.0, 9.0, 10.0, 11.0, 12.0ç­‰ä¸åŒç‰ˆæœ¬ä¸Šæµ‹è¯•
   - **æµ‹è¯•ï¿?**ï¼šåœ¨ä¸åŒå±å¹•å°ºå¯¸ï¼ˆæ‰‹æœºã€å¹³æ¿ï¼‰ä¸Šæµ‹è¯•UIæ˜¾ç¤º
   - **æµ‹è¯•ï¿?**ï¼šæ¨ªå±å’Œç«–å±æ¨¡å¼åˆ‡æ¢æµ‹è¯•
   - **æµ‹è¯•ï¿?**ï¼šåœ¨ä½é…ç½®è®¾å¤‡ä¸Šçš„è¿è¡Œæµ‹ï¿?   - **é¢„æœŸç»“æœ**ï¼šåº”ç”¨åœ¨å„å¹³å°ä¸ŠåŠŸèƒ½æ­£å¸¸ï¼ŒUIé€‚é…è‰¯å¥½

3. **ç¨³å®šæ€§æµ‹ï¿?*
   - **æµ‹è¯•ï¿?**ï¼šåº”ç”¨åœ¨åå°è¿è¡Œé•¿æ—¶é—´åæ¢å¤
   - **æµ‹è¯•ï¿?**ï¼šç¼–è¾‘è¿‡ç¨‹ä¸­è¢«ç³»ç»Ÿä¸­æ–­ï¼ˆå¦‚æ¥ç”µï¼‰åçš„æ¢å¤
   - **æµ‹è¯•ï¿?**ï¼šé‡å¤å¤šæ¬¡åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤æ“ï¿?   - **é¢„æœŸç»“æœ**ï¼šåº”ç”¨ä¿æŒç¨³å®šï¼Œæ•°æ®ä¸ä¸¢ï¿?
## 8. å·²çŸ¥é—®é¢˜å’Œæ”¹è¿›æ–¹ï¿?
### 8.1 å·²çŸ¥é—®é¢˜

1. **ç”¨æˆ·ä½“éªŒé—®é¢˜**
   - **é—®é¢˜1**ï¼šç¼–è¾‘ç¬”è®°æ—¶ç¼ºå°‘è‡ªåŠ¨ä¿å­˜åŠŸèƒ½ï¼Œæ„å¤–é€€å‡ºå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢ï¿?   - **é—®é¢˜2**ï¼šåˆ é™¤æ“ä½œæ²¡ï¿?æ’¤é”€"åŠŸèƒ½ï¼Œè¯¯åˆ åæ— æ³•æ¢å¤
   - **é—®é¢˜3**ï¼šé•¿æ–‡æœ¬ç¼–è¾‘æ—¶ç¼ºå°‘å…‰æ ‡å®šä½è¾…åŠ©åŠŸï¿?
2. **åŠŸèƒ½é™åˆ¶**
   - **é—®é¢˜1**ï¼šä»…æ”¯æŒé¢„å®šä¹‰åˆ†ç±»ï¼Œæ— æ³•è‡ªå®šä¹‰æ–°åˆ†ç±»
   - **é—®é¢˜2**ï¼šä¸æ”¯æŒç¬”è®°å†…å®¹çš„æ ¼å¼åŒ–ï¼ˆå¦‚ç²—ä½“ã€æ–œä½“ç­‰ï¿?   - **é—®é¢˜3**ï¼šç¼ºå°‘å¾…åŠäº‹é¡¹å®ŒæˆçŠ¶æ€çš„æ ‡è®°åŠŸèƒ½

3. **æŠ€æœ¯é—®ï¿?*
   - **é—®é¢˜1**ï¼šå¤§é‡ç¬”è®°æ•°æ®ä¸‹åˆ—è¡¨æ»šåŠ¨å¯èƒ½å‡ºç°å¡é¡¿
   - **é—®é¢˜2**ï¼šæœç´¢ç»“æœæœªæŒ‰ç›¸å…³æ€§æ’ï¿?   - **é—®é¢˜3**ï¼šæ•°æ®ä»…å­˜å‚¨åœ¨æœ¬åœ°ï¼Œæ²¡æœ‰å¤‡ä»½æ¢å¤æœºåˆ¶

### 8.2 æ”¹è¿›æ–¹å‘

1. **æ ¸å¿ƒåŠŸèƒ½å¢å¼º**
   - **å»ºè®®1**ï¼šå®ç°è‡ªå®šä¹‰åˆ†ç±»ç®¡ç†ï¼Œå…è®¸ç”¨æˆ·æ·»åŠ ã€ç¼–è¾‘å’Œåˆ é™¤åˆ†ç±»
   - **å»ºè®®2**ï¼šæ·»åŠ å¾…åŠäº‹é¡¹å®ŒæˆçŠ¶æ€åˆ‡æ¢åŠŸèƒ½ï¼Œæ”¯æŒä»»åŠ¡å®Œæˆå‹¾ï¿½?   - **å»ºè®®3**ï¼šå®ç°ç¬”è®°å†…å®¹æ ¼å¼åŒ–åŠŸèƒ½ï¼Œæ”¯æŒåŸºç¡€æ–‡æœ¬æ ·å¼
   - **å»ºè®®4**ï¼šæ·»åŠ ç¬”è®°æ ‡ç­¾ç³»ç»Ÿï¼Œæ”¯æŒå¤šæ ‡ç­¾ç®¡ï¿?
2. **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**
   - **å»ºè®®1**ï¼šæ·»åŠ ç¬”è®°ç¼–è¾‘è‡ªåŠ¨ä¿å­˜åŠŸèƒ½ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±
   - **å»ºè®®2**ï¼šå®ç°åˆ é™¤æ“ä½œçš„æ’¤é”€æœºåˆ¶ï¼ˆå¦‚å›æ”¶ç«™åŠŸèƒ½ï¼‰
   - **å»ºè®®3**ï¼šæ·»åŠ æš—è‰²ä¸»é¢˜æ”¯æŒï¼Œé€‚åº”ä¸åŒä½¿ç”¨åœºæ™¯
   - **å»ºè®®4**ï¼šä¼˜åŒ–ç¼–è¾‘ç•Œé¢ï¼Œæ·»åŠ å¿«æ·å·¥å…·ï¿?
3. **æ•°æ®ç®¡ç†å¢å¼º**
   - **å»ºè®®1**ï¼šå®ç°æ•°æ®äº‘åŒæ­¥åŠŸèƒ½ï¼Œæ”¯æŒè·¨è®¾å¤‡è®¿é—®
   - **å»ºè®®2**ï¼šæ·»åŠ è‡ªåŠ¨å¤‡ä»½å’Œæ¢å¤åŠŸèƒ½
   - **å»ºè®®3**ï¼šå®ç°ç¬”è®°å¯¼å‡ºåŠŸèƒ½ï¼ˆæ”¯æŒTXTã€Markdownç­‰æ ¼å¼ï¼‰
   - **å»ºè®®4**ï¼šæ·»åŠ æ•°æ®åŠ å¯†é€‰é¡¹ï¼Œä¿æŠ¤éšç§ç¬”ï¿?
4. **æ€§èƒ½å’Œç¨³å®šæ€§ä¼˜ï¿?*
   - **å»ºè®®1**ï¼šå®ç°åˆ—è¡¨è™šæ‹ŸåŒ–ï¼Œä¼˜åŒ–å¤§æ•°æ®é‡ä¸‹çš„æ€§èƒ½
   - **å»ºè®®2**ï¼šæ·»åŠ æœç´¢ç»“æœç¼“å­˜æœºï¿?   - **å»ºè®®3**ï¼šä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢ï¼Œæé«˜å“åº”é€Ÿåº¦
   - **å»ºè®®4**ï¼šæ·»åŠ æ›´å¤šçš„è¾¹ç•Œæ¡ä»¶å¤„ç†å’Œé”™è¯¯æ¢å¤æœºï¿?
5. **æ™ºèƒ½åŠŸèƒ½å»ºè®®**
   - **å»ºè®®1**ï¼šå®ç°å¾…åŠäº‹é¡¹åˆ°æœŸæé†’åŠŸï¿?   - **å»ºè®®2**ï¼šæ·»åŠ æ™ºèƒ½åˆ†ç±»å»ºè®®åŠŸï¿?   - **å»ºè®®3**ï¼šå®ç°ç¬”è®°å†…å®¹è‡ªåŠ¨æ‘˜è¦ç”Ÿï¿?   - **å»ºè®®4**ï¼šæ·»åŠ è¯­éŸ³è¾“å…¥å’Œè¯­éŸ³è½¬æ–‡æœ¬åŠŸï¿?
## 9. æ ¸å¿ƒä»£ç ç¤ºä¾‹

### 9.1 æ•°æ®åº“å¸®åŠ©ç±»ï¼ˆNoteDbHelper.javaï¿?
```java
public class NoteDbHelper extends SQLiteOpenHelper {
    private static final String DATABASE_NAME = "notepad.db";
    private static final int DATABASE_VERSION = 2;
    
    public static final String TABLE_NAME = "notes";
    public static final String COLUMN_ID = "_id";
    public static final String COLUMN_TITLE = "title";
    public static final String COLUMN_CONTENT = "content";
    public static final String COLUMN_CREATED = "created";
    public static final String COLUMN_MODIFIED = "modified";
    public static final String COLUMN_CATEGORY = "category";
    public static final String COLUMN_IS_TODO = "is_todo";
    public static final String COLUMN_DEADLINE = "deadline";
    
    private static final String SQL_CREATE_TABLE = "CREATE TABLE " + TABLE_NAME + " (" +
            COLUMN_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
            COLUMN_TITLE + " TEXT NOT NULL, " +
            COLUMN_CONTENT + " TEXT, " +
            COLUMN_CREATED + " INTEGER NOT NULL, " +
            COLUMN_MODIFIED + " INTEGER NOT NULL, " +
            COLUMN_CATEGORY + " TEXT DEFAULT 'default', " +
            COLUMN_IS_TODO + " INTEGER DEFAULT 0, " +
            COLUMN_DEADLINE + " INTEGER DEFAULT 0)";
    
    private static final String SQL_ADD_CATEGORY_INDEX = "CREATE INDEX IF NOT EXISTS idx_category ON " + TABLE_NAME + "(" + COLUMN_CATEGORY + ")";
    
    public NoteDbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
    
    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(SQL_CREATE_TABLE);
        db.execSQL(SQL_ADD_CATEGORY_INDEX);
    }
    
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // å¤„ç†æ•°æ®åº“ç‰ˆæœ¬å‡ï¿?        if (oldVersion < 2) {
            // æ·»åŠ åˆ†ç±»ç›¸å…³å­—æ®µ
            db.execSQL("ALTER TABLE " + TABLE_NAME + " ADD COLUMN " + COLUMN_CATEGORY + " TEXT DEFAULT 'default'");
            db.execSQL("ALTER TABLE " + TABLE_NAME + " ADD COLUMN " + COLUMN_IS_TODO + " INTEGER DEFAULT 0");
            db.execSQL("ALTER TABLE " + TABLE_NAME + " ADD COLUMN " + COLUMN_DEADLINE + " INTEGER DEFAULT 0");
            db.execSQL(SQL_ADD_CATEGORY_INDEX);
        }
    }
}
```

### 9.2 å†…å®¹æä¾›è€…ï¼ˆNotePadProvider.javaï¿?
```java
public class NotePadProvider extends ContentProvider {
    private static final String AUTHORITY = "com.example.notepad.notes";
    private static final String BASE_PATH = "note";
    public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY + "/" + BASE_PATH);
    
    public static final int NOTES = 1;
    public static final int NOTE_ID = 2;
    
    private static final UriMatcher uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
    
    static {
        uriMatcher.addURI(AUTHORITY, BASE_PATH, NOTES);
        uriMatcher.addURI(AUTHORITY, BASE_PATH + "/#", NOTE_ID);
    }
    
    private SQLiteDatabase database;
    
    @Override
    public boolean onCreate() {
        NoteDbHelper dbHelper = new NoteDbHelper(getContext());
        database = dbHelper.getWritableDatabase();
        return true;
    }
    
    @Override
    public Cursor query(Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder) {
        SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
        queryBuilder.setTables(NoteDbHelper.TABLE_NAME);
        
        int uriType = uriMatcher.match(uri);
        switch (uriType) {
            case NOTE_ID:
                queryBuilder.appendWhere(NoteDbHelper.COLUMN_ID + "=" + uri.getLastPathSegment());
                break;
            case NOTES:
                // é»˜è®¤æŒ‰ä¿®æ”¹æ—¶é—´å€’åºæ’åˆ—
                if (sortOrder == null || sortOrder.isEmpty()) {
                    sortOrder = NoteDbHelper.COLUMN_MODIFIED + " DESC";
                }
                break;
            default:
                throw new IllegalArgumentException("Unknown URI: " + uri);
        }
        
        Cursor cursor = queryBuilder.query(database, projection, selection, selectionArgs, null, null, sortOrder);
        cursor.setNotificationUri(getContext().getContentResolver(), uri);
        
        return cursor;
    }
    
    @Override
    public String getType(Uri uri) {
        int uriType = uriMatcher.match(uri);
        switch (uriType) {
            case NOTES:
                return "vnd.android.cursor.dir/vnd.com.example.notepad.notes";
            case NOTE_ID:
                return "vnd.android.cursor.item/vnd.com.example.notepad.notes";
            default:
                throw new IllegalArgumentException("Unknown URI: " + uri);
        }
    }
    
    @Override
    public Uri insert(Uri uri, ContentValues values) {
        int uriType = uriMatcher.match(uri);
        if (uriType != NOTES) {
            throw new IllegalArgumentException("Unknown URI: " + uri);
        }
        
        // è®¾ç½®åˆ›å»ºå’Œä¿®æ”¹æ—¶ï¿?        long now = System.currentTimeMillis();
        if (!values.containsKey(NoteDbHelper.COLUMN_CREATED)) {
            values.put(NoteDbHelper.COLUMN_CREATED, now);
        }
        if (!values.containsKey(NoteDbHelper.COLUMN_MODIFIED)) {
            values.put(NoteDbHelper.COLUMN_MODIFIED, now);
        }
        
        long id = database.insert(NoteDbHelper.TABLE_NAME, null, values);
        getContext().getContentResolver().notifyChange(uri, null);
        
        return Uri.parse(BASE_PATH + "/" + id);
    }
    
    @Override
    public int delete(Uri uri, String selection, String[] selectionArgs) {
        int uriType = uriMatcher.match(uri);
        int rowsDeleted;
        
        switch (uriType) {
            case NOTES:
                rowsDeleted = database.delete(NoteDbHelper.TABLE_NAME, selection, selectionArgs);
                break;
            case NOTE_ID:
                String id = uri.getLastPathSegment();
                rowsDeleted = database.delete(NoteDbHelper.TABLE_NAME, NoteDbHelper.COLUMN_ID + "=" + id,
                        selectionArgs);
                break;
            default:
                throw new IllegalArgumentException("Unknown URI: " + uri);
        }
        
        getContext().getContentResolver().notifyChange(uri, null);
        return rowsDeleted;
    }
    
    @Override
    public int update(Uri uri, ContentValues values, String selection,
            String[] selectionArgs) {
        int uriType = uriMatcher.match(uri);
        int rowsUpdated;
        
        // æ›´æ–°ä¿®æ”¹æ—¶é—´
        values.put(NoteDbHelper.COLUMN_MODIFIED, System.currentTimeMillis());
        
        switch (uriType) {
            case NOTES:
                rowsUpdated = database.update(NoteDbHelper.TABLE_NAME, values, selection, selectionArgs);
                break;
            case NOTE_ID:
                String id = uri.getLastPathSegment();
                rowsUpdated = database.update(NoteDbHelper.TABLE_NAME, values, NoteDbHelper.COLUMN_ID + "=" + id,
                        selectionArgs);
                break;
            default:
                throw new IllegalArgumentException("Unknown URI: " + uri);
        }
        
        getContext().getContentResolver().notifyChange(uri, null);
        return rowsUpdated;
    }
}
```

### 9.3 ç¬”è®°åˆ—è¡¨æ´»åŠ¨ï¼ˆNoteList.javaï¿?
```java
public class NoteList extends AppCompatActivity {
    private RecyclerView mRecyclerView;
    private NoteAdapter mAdapter;
    private EditText mSearchEditText;
    private Handler mSearchHandler = new Handler();
    private String mCurrentQuery = "";
    private String mCurrentCategory = "";
    
    // æœç´¢å»¶è¿Ÿï¼Œå®ç°é˜²ï¿?    private static final int SEARCH_DELAY_MS = 300;
    
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.note_list);
        
        mRecyclerView = findViewById(R.id.recycler_view);
        mRecyclerView.setLayoutManager(new LinearLayoutManager(this));
        
        mAdapter = new NoteAdapter(this, getSupportFragmentManager());
        mRecyclerView.setAdapter(mAdapter);
        
        mSearchEditText = findViewById(R.id.search_edit_text);
        mSearchEditText.addTextChangedListener(new TextWatcher() {
            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {}
            
            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // ç§»é™¤ä¹‹å‰çš„æœç´¢ä»»ï¿?                mSearchHandler.removeCallbacksAndMessages(null);
                mCurrentQuery = s.toString();
                
                // å»¶è¿Ÿæ‰§è¡Œæœç´¢ï¼Œå®ç°é˜²ï¿?                mSearchHandler.postDelayed(new Runnable() {
                    @Override
                    public void run() {
                        loadNotes();
                    }
                }, SEARCH_DELAY_MS);
            }
            
            @Override
            public void afterTextChanged(Editable s) {}
        });
    }
    
    @Override
    protected void onResume() {
        super.onResume();
        loadNotes();
        
        // æ³¨å†Œå†…å®¹è§‚å¯Ÿè€…ï¼Œç›‘å¬æ•°æ®å˜åŒ–
        getContentResolver().registerContentObserver(
                NotePadProvider.CONTENT_URI, true, mNotesObserver);
    }
    
    @Override
    protected void onPause() {
        super.onPause();
        // å–æ¶ˆæ³¨å†Œå†…å®¹è§‚å¯Ÿï¿?        getContentResolver().unregisterContentObserver(mNotesObserver);
    }
    
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.note_list_menu, menu);
        return true;
    }
    
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        int id = item.getItemId();
        
        switch (id) {
            case R.id.menu_add_note:
                Intent intent = new Intent(this, NoteEditor.class);
                startActivity(intent);
                return true;
            case R.id.menu_category:
                showCategoryDialog();
                return true;
            case R.id.menu_refresh:
                loadNotes();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }
    
    private void loadNotes() {
        // æ„å»ºæŸ¥è¯¢æ¡ä»¶
        StringBuilder selection = new StringBuilder();
        ArrayList<String> selectionArgs = new ArrayList<>();
        
        if (!mCurrentQuery.isEmpty()) {
            selection.append("(" + NoteDbHelper.COLUMN_TITLE + " LIKE ? OR " + 
                             NoteDbHelper.COLUMN_CONTENT + " LIKE ?)");
            selectionArgs.add("%" + mCurrentQuery + "%");
            selectionArgs.add("%" + mCurrentQuery + "%");
        }
        
        if (!mCurrentCategory.isEmpty()) {
            if (selection.length() > 0) {
                selection.append(" AND ");
            }
            selection.append(NoteDbHelper.COLUMN_CATEGORY + " = ?");
            selectionArgs.add(mCurrentCategory);
        }
        
        // æ‰§è¡ŒæŸ¥è¯¢
        Cursor cursor = getContentResolver().query(
                NotePadProvider.CONTENT_URI,
                null,
                selection.length() > 0 ? selection.toString() : null,
                selectionArgs.isEmpty() ? null : selectionArgs.toArray(new String[0]),
                NoteDbHelper.COLUMN_MODIFIED + " DESC");
        
        mAdapter.setCursor(cursor);
    }
    
    private void showCategoryDialog() {
        final String[] categories = {"å…¨éƒ¨", "é»˜è®¤", "å·¥ä½œ", "å­¦ä¹ ", "ç”Ÿæ´»"};
        
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("é€‰æ‹©åˆ†ç±»");
        builder.setItems(categories, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                if (which == 0) {
                    mCurrentCategory = "";
                } else {
                    mCurrentCategory = categories[which];
                }
                loadNotes();
            }
        });
        builder.show();
    }
    
    // å†…å®¹è§‚å¯Ÿè€…ï¼Œç›‘å¬æ•°æ®åº“å˜ï¿?    private ContentObserver mNotesObserver = new ContentObserver(new Handler()) {
        @Override
        public void onChange(boolean selfChange, Uri uri) {
            super.onChange(selfChange, uri);
            loadNotes();
        }
    };
}
```

### 9.4 ç¬”è®°ç¼–è¾‘æ´»åŠ¨ï¼ˆNoteEditor.javaï¿?
```java
public class NoteEditor extends AppCompatActivity {
    private EditText mTitleEditText;
    private EditText mContentEditText;
    private Spinner mCategorySpinner;
    private CheckBox mTodoCheckBox;
    private TextView mDeadlineTextView;
    private long mNoteId = -1;
    
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.note_editor);
        
        mTitleEditText = findViewById(R.id.et_note_title);
        mContentEditText = findViewById(R.id.et_note_content);
        mCategorySpinner = findViewById(R.id.spinner_category);
        mTodoCheckBox = findViewById(R.id.cb_todo);
        mDeadlineTextView = findViewById(R.id.tv_deadline);
        
        // åˆå§‹åŒ–åˆ†ç±»ä¸‹æ‹‰åˆ—ï¿?        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                this, R.array.category_array, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        mCategorySpinner.setAdapter(adapter);
        
        // å¤„ç†ç¼–è¾‘æ¨¡å¼
        Intent intent = getIntent();
        if (intent.hasExtra(Intent.EXTRA_UID)) {
            mNoteId = intent.getLongExtra(Intent.EXTRA_UID, -1);
            loadNoteData();
        }
        
        // å¤„ç†æˆªæ­¢æ—¶é—´ç‚¹å‡»
        mDeadlineTextView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if (mTodoCheckBox.isChecked()) {
                    showDatePicker();
                }
            }
        });
        
        // å¤„ç†å¾…åŠäº‹é¡¹å¤é€‰æ¡†å˜åŒ–
        mTodoCheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                mDeadlineTextView.setEnabled(isChecked);
                if (isChecked) {
                    // å¦‚æœæ²¡æœ‰è®¾ç½®æˆªæ­¢æ—¶é—´ï¼Œé»˜è®¤è®¾ç½®ä¸ºæ˜å¤©
                    if (mDeadlineTextView.getText().toString().isEmpty()) {
                        Calendar calendar = Calendar.getInstance();
                        calendar.add(Calendar.DAY_OF_YEAR, 1);
                        updateDeadlineText(calendar.getTimeInMillis());
                    }
                }
            }
        });
    }
    
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.note_editor_menu, menu);
        return true;
    }
    
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        int id = item.getItemId();
        
        switch (id) {
            case R.id.menu_save:
                saveNote();
                finish();
                return true;
            case R.id.menu_delete:
                if (mNoteId != -1) {
                    deleteNote();
                }
                finish();
                return true;
            case R.id.menu_share:
                shareNote();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }
    
    private void loadNoteData() {
        Uri noteUri = ContentUris.withAppendedId(NotePadProvider.CONTENT_URI, mNoteId);
        Cursor cursor = getContentResolver().query(noteUri, null, null, null, null);
        
        if (cursor != null && cursor.moveToFirst()) {
            String title = cursor.getString(cursor.getColumnIndex(NoteDbHelper.COLUMN_TITLE));
            String content = cursor.getString(cursor.getColumnIndex(NoteDbHelper.COLUMN_CONTENT));
            String category = cursor.getString(cursor.getColumnIndex(NoteDbHelper.COLUMN_CATEGORY));
            boolean isTodo = cursor.getInt(cursor.getColumnIndex(NoteDbHelper.COLUMN_IS_TODO)) == 1;
            long deadline = cursor.getLong(cursor.getColumnIndex(NoteDbHelper.COLUMN_DEADLINE));
            
            mTitleEditText.setText(title);
            mContentEditText.setText(content);
            
            // è®¾ç½®åˆ†ç±»é€‰æ‹©
            ArrayAdapter<CharSequence> adapter = (ArrayAdapter<CharSequence>) mCategorySpinner.getAdapter();
            int position = adapter.getPosition(category);
            if (position >= 0) {
                mCategorySpinner.setSelection(position);
            }
            
            // è®¾ç½®å¾…åŠäº‹é¡¹
            mTodoCheckBox.setChecked(isTodo);
            mDeadlineTextView.setEnabled(isTodo);
            
            if (isTodo && deadline > 0) {
                updateDeadlineText(deadline);
            }
            
            cursor.close();
        }
    }
    
    private void saveNote() {
        ContentValues values = new ContentValues();
        values.put(NoteDbHelper.COLUMN_TITLE, mTitleEditText.getText().toString());
        values.put(NoteDbHelper.COLUMN_CONTENT, mContentEditText.getText().toString());
        values.put(NoteDbHelper.COLUMN_CATEGORY, mCategorySpinner.getSelectedItem().toString());
        values.put(NoteDbHelper.COLUMN_IS_TODO, mTodoCheckBox.isChecked() ? 1 : 0);
        
        // è§£ææˆªæ­¢æ—¶é—´
        String deadlineText = mDeadlineTextView.getText().toString();
        long deadline = 0;
        if (mTodoCheckBox.isChecked() && !deadlineText.isEmpty()) {
            // è¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…é¡¹ç›®ä¸­éœ€è¦æ›´å¥å£®çš„æ—¥æœŸè§£ï¿?            deadline = System.currentTimeMillis() + 86400000; // é»˜è®¤åŠ ä¸€ï¿?        }
        values.put(NoteDbHelper.COLUMN_DEADLINE, deadline);
        
        if (mNoteId == -1) {
            // åˆ›å»ºæ–°ç¬”ï¿?            getContentResolver().insert(NotePadProvider.CONTENT_URI, values);
        } else {
            // æ›´æ–°ç°æœ‰ç¬”è®°
            Uri noteUri = ContentUris.withAppendedId(NotePadProvider.CONTENT_URI, mNoteId);
            getContentResolver().update(noteUri, values, null, null);
        }
    }
    
    private void deleteNote() {
        Uri noteUri = ContentUris.withAppendedId(NotePadProvider.CONTENT_URI, mNoteId);
        getContentResolver().delete(noteUri, null, null);
    }
    
    private void shareNote() {
        String title = mTitleEditText.getText().toString();
        String content = mContentEditText.getText().toString();
        
        Intent shareIntent = new Intent(Intent.ACTION_SEND);
        shareIntent.setType("text/plain");
        shareIntent.putExtra(Intent.EXTRA_SUBJECT, title);
        shareIntent.putExtra(Intent.EXTRA_TEXT, content);
        
        startActivity(Intent.createChooser(shareIntent, "åˆ†äº«ç¬”è®°"));
    }
    
    private void showDatePicker() {
        Calendar calendar = Calendar.getInstance();
        
        DatePickerDialog datePickerDialog = new DatePickerDialog(this, new DatePickerDialog.OnDateSetListener() {
            @Override
            public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {
                Calendar selectedCalendar = Calendar.getInstance();
                selectedCalendar.set(year, month, dayOfMonth);
                updateDeadlineText(selectedCalendar.getTimeInMillis());
            }
        }, calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH));
        
        // è®¾ç½®æœ€å°æ—¥æœŸä¸ºä»Šå¤©
        datePickerDialog.getDatePicker().setMinDate(System.currentTimeMillis());
        datePickerDialog.show();
    }
    
    private void updateDeadlineText(long timestamp) {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd", Locale.getDefault());
        mDeadlineTextView.setText(sdf.format(new Date(timestamp)));
    }
}
```

### 9.5 ç¬”è®°é€‚é…å™¨ï¼ˆNoteAdapter.javaï¿?
```java
public class NoteAdapter extends RecyclerView.Adapter<NoteAdapter.NoteViewHolder> {
    private Context mContext;
    private Cursor mCursor;
    private FragmentManager mFragmentManager;
    
    public NoteAdapter(Context context, FragmentManager fragmentManager) {
        mContext = context;
        mFragmentManager = fragmentManager;
    }
    
    public void setCursor(Cursor cursor) {
        if (mCursor != null && mCursor != cursor) {
            mCursor.close();
        }
        mCursor = cursor;
        notifyDataSetChanged();
    }
    
    @Override
    public NoteViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        View itemView = LayoutInflater.from(parent.getContext())
                .inflate(R.layout.note_item, parent, false);
        return new NoteViewHolder(itemView);
    }
    
    @Override
    public void onBindViewHolder(NoteViewHolder holder, int position) {
        if (mCursor == null || !mCursor.moveToPosition(position)) {
            return;
        }
        
        String title = mCursor.getString(mCursor.getColumnIndex(NoteDbHelper.COLUMN_TITLE));
        String content = mCursor.getString(mCursor.getColumnIndex(NoteDbHelper.COLUMN_CONTENT));
        long modified = mCursor.getLong(mCursor.getColumnIndex(NoteDbHelper.COLUMN_MODIFIED));
        String category = mCursor.getString(mCursor.getColumnIndex(NoteDbHelper.COLUMN_CATEGORY));
        boolean isTodo = mCursor.getInt(mCursor.getColumnIndex(NoteDbHelper.COLUMN_IS_TODO)) == 1;
        final long id = mCursor.getLong(mCursor.getColumnIndex(NoteDbHelper.COLUMN_ID));
        
        holder.titleTextView.setText(title);
        
        // è®¾ç½®å†…å®¹é¢„è§ˆï¼Œé™åˆ¶é•¿ï¿?        if (content.length() > 50) {
            holder.contentTextView.setText(content.substring(0, 50) + "...");
        } else {
            holder.contentTextView.setText(content);
        }
        
        // è®¾ç½®ç›¸å¯¹æ—¶é—´
        holder.timeTextView.setText(getRelativeTime(modified));
        
        // è®¾ç½®åˆ†ç±»æ ‡ç­¾å’Œé¢œï¿?        holder.categoryTextView.setText(category);
        holder.categoryTextView.setBackgroundColor(getCategoryColor(category));
        
        // è®¾ç½®å¾…åŠå›¾æ ‡
        if (isTodo) {
            holder.todoImageView.setVisibility(View.VISIBLE);
        } else {
            holder.todoImageView.setVisibility(View.GONE);
        }
        
        // è®¾ç½®ç‚¹å‡»äº‹ä»¶
        holder.itemView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent(mContext, NoteEditor.class);
                intent.putExtra(Intent.EXTRA_UID, id);
                mContext.startActivity(intent);
            }
        });
        
        // è®¾ç½®é•¿æŒ‰èœå•
        holder.itemView.setOnLongClickListener(new View.OnLongClickListener() {
            @Override
            public boolean onLongClick(View v) {
                showPopupMenu(v, id);
                return true;
            }
        });
    }
    
    @Override
    public int getItemCount() {
        return mCursor != null ? mCursor.getCount() : 0;
    }
    
    private String getRelativeTime(long timestamp) {
        long now = System.currentTimeMillis();
        long diff = now - timestamp;
        
        // å°äº1åˆ†é’Ÿ
        if (diff < 60 * 1000) {
            return "åˆšåˆš";
        }
        
        // å°äº1å°æ—¶
        if (diff < 60 * 60 * 1000) {
            long minutes = diff / (60 * 1000);
            return minutes + "åˆ†é’Ÿï¿?;
        }
        
        // å°äº24å°æ—¶
        if (diff < 24 * 60 * 60 * 1000) {
            long hours = diff / (60 * 60 * 1000);
            return hours + "å°æ—¶ï¿?;
        }
        
        // æ˜¨å¤©
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(now);
        calendar.add(Calendar.DAY_OF_YEAR, -1);
        long yesterday = calendar.getTimeInMillis();
        
        if (timestamp > yesterday) {
            return "æ˜¨å¤©";
        }
        
        // ä¸€å‘¨å†…
        calendar.add(Calendar.DAY_OF_YEAR, -6);
        long weekAgo = calendar.getTimeInMillis();
        
        if (timestamp > weekAgo) {
            long days = diff / (24 * 60 * 60 * 1000);
            return days + "å¤©å‰";
        }
        
        // æ›´æ—©ï¼Œæ˜¾ç¤ºå…·ä½“æ—¥ï¿?        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd", Locale.getDefault());
        return sdf.format(new Date(timestamp));
    }
    
    private int getCategoryColor(String category) {
        switch (category) {
            case "å·¥ä½œ":
                return Color.parseColor("#FF9800");
            case "å­¦ä¹ ":
                return Color.parseColor("#2196F3");
            case "ç”Ÿæ´»":
                return Color.parseColor("#4CAF50");
            default:
                return Color.parseColor("#9E9E9E");
        }
    }
    
    private void showPopupMenu(View view, final long noteId) {
        PopupMenu popupMenu = new PopupMenu(mContext, view);
        popupMenu.inflate(R.menu.note_item_menu);
        
        popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
            @Override
            public boolean onMenuItemClick(MenuItem item) {
                switch (item.getItemId()) {
                    case R.id.menu_edit:
                        Intent intent = new Intent(mContext, NoteEditor.class);
                        intent.putExtra(Intent.EXTRA_UID, noteId);
                        mContext.startActivity(intent);
                        return true;
                    case R.id.menu_delete:
                        showDeleteConfirmDialog(noteId);
                        return true;
                    case R.id.menu_share:
                        shareNote(noteId);
                        return true;
                    default:
                        return false;
                }
            }
        });
        
        popupMenu.show();
    }
    
    private void showDeleteConfirmDialog(final long noteId) {
        AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
        builder.setTitle("ç¡®è®¤åˆ é™¤");
        builder.setMessage("ç¡®å®šè¦åˆ é™¤è¿™æ¡ç¬”è®°å—ï¿?);
        builder.setPositiveButton("ç¡®å®š", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                Uri noteUri = ContentUris.withAppendedId(NotePadProvider.CONTENT_URI, noteId);
                mContext.getContentResolver().delete(noteUri, null, null);
            }
        });
        builder.setNegativeButton("å–æ¶ˆ", null);
        builder.show();
    }
    
    private void shareNote(long noteId) {
        Uri noteUri = ContentUris.withAppendedId(NotePadProvider.CONTENT_URI, noteId);
        Cursor cursor = mContext.getContentResolver().query(noteUri, null, null, null, null);
        
        if (cursor != null && cursor.moveToFirst()) {
            String title = cursor.getString(cursor.getColumnIndex(NoteDbHelper.COLUMN_TITLE));
            String content = cursor.getString(cursor.getColumnIndex(NoteDbHelper.COLUMN_CONTENT));
            
            Intent shareIntent = new Intent(Intent.ACTION_SEND);
            shareIntent.setType("text/plain");
            shareIntent.putExtra(Intent.EXTRA_SUBJECT, title);
            shareIntent.putExtra(Intent.EXTRA_TEXT, content);
            
            mContext.startActivity(Intent.createChooser(shareIntent, "åˆ†äº«ç¬”è®°"));
            
            cursor.close();
        }
    }
    
    public static class NoteViewHolder extends RecyclerView.ViewHolder {
        public TextView titleTextView;
        public TextView contentTextView;
        public TextView timeTextView;
        public TextView categoryTextView;
        public ImageView todoImageView;
        
        public NoteViewHolder(View itemView) {
            super(itemView);
            titleTextView = itemView.findViewById(R.id.note_title);
            contentTextView = itemView.findViewById(R.id.note_content_preview);
            timeTextView = itemView.findViewById(R.id.note_time);
            categoryTextView = itemView.findViewById(R.id.note_category);
            todoImageView = itemView.findViewById(R.id.note_todo_icon);
        }
    }
}
```

### 9.6 å¸¸é‡å®šä¹‰ï¼ˆNoteConstants.javaï¿?
```java
public class NoteConstants {
    // åˆ†ç±»å¸¸é‡
    public static final String CATEGORY_DEFAULT = "é»˜è®¤";
    public static final String CATEGORY_WORK = "å·¥ä½œ";
    public static final String CATEGORY_STUDY = "å­¦ä¹ ";
    public static final String CATEGORY_LIFE = "ç”Ÿæ´»";
    
    // æ„å›¾åŠ¨ä½œ
    public static final String ACTION_CREATE_NOTE = "com.example.notepad.ACTION_CREATE_NOTE";
    public static final String ACTION_EDIT_NOTE = "com.example.notepad.ACTION_EDIT_NOTE";
    
    // å…±äº«åå¥½ï¿?    public static final String PREF_SEARCH_DELAY = "search_delay";
    public static final String PREF_DEFAULT_CATEGORY = "default_category";
    
    // æ•°æ®åº“ç›¸ï¿?    public static final int DATABASE_VERSION = 2;
    
    // æœç´¢é˜²æŠ–å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
    public static final int DEFAULT_SEARCH_DELAY_MS = 300;
}
```

### 9.7 åº”ç”¨å…¥å£ç±»ï¼ˆNoteApplication.javaï¿?
```java
public class NoteApplication extends Application {
    private static NoteApplication sInstance;
    
    @Override
    public void onCreate() {
        super.onCreate();
        sInstance = this;
        
        // åˆå§‹åŒ–åº”ï¿?        initApp();
    }
    
    public static synchronized NoteApplication getInstance() {
        return sInstance;
    }
    
    private void initApp() {
        // åˆå§‹åŒ–å…±äº«åå¥½è®¾ï¿?        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
        // å…¶ä»–åˆå§‹åŒ–å·¥ï¿?    }
}
```

## 10. æ€»ç»“

æœ¬å®éªŒæˆåŠŸå¼€å‘äº†ä¸€æ¬¾åŠŸèƒ½å®Œæ•´çš„Androidè®°äº‹æœ¬åº”ç”¨ï¼Œå®ç°äº†ç¬”è®°çš„å¢åˆ æ”¹æŸ¥ã€åˆ†ç±»ç®¡ç†ã€æœç´¢åŠŸèƒ½ã€ä»£åŠäº‹é¡¹ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚é€šè¿‡é¡¹ç›®å®è·µï¼Œå·©å›ºäº†Androidåº”ç”¨å¼€å‘çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼ŒåŒ…æ‹¬UIè®¾è®¡ã€æ•°æ®å­˜å‚¨ã€å†…å®¹æä¾›è€…ã€æ´»åŠ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ç­‰ï¿?
é¡¹ç›®é‡‡ç”¨äº†æ ‡å‡†çš„Androidåº”ç”¨æ¶æ„ï¼Œä½¿ç”¨ContentProvideræ¨¡å¼å°è£…æ•°æ®è®¿é—®ï¼Œå®ç°äº†è‰¯å¥½çš„ä»£ç ç»„ç»‡å’Œæ¨¡å—åˆ†ç¦»ã€‚é€šè¿‡æ€§èƒ½ä¼˜åŒ–æªæ–½ï¼Œå¦‚è§†å›¾å¤ç”¨ã€æœç´¢é˜²æŠ–ã€æ•°æ®åº“ç´¢å¼•ç­‰ï¼Œä¿è¯äº†åº”ç”¨åœ¨ä¸åŒè®¾å¤‡ä¸Šçš„æµç•…è¿è¡Œï¿?
è™½ç„¶åº”ç”¨å·²ç»å…·å¤‡äº†åŸºæœ¬çš„ç¬”è®°ç®¡ç†åŠŸèƒ½ï¼Œä½†ä»æœ‰è¿›ä¸€æ­¥ä¼˜åŒ–å’Œæ‰©å±•çš„ç©ºé—´ã€‚æœªæ¥å¯ä»¥è€ƒè™‘æ·»åŠ å¯Œæ–‡æœ¬ç¼–è¾‘ã€äº‘åŒæ­¥ã€è¯­éŸ³ç¬”è®°ç­‰é«˜çº§åŠŸèƒ½ï¼ŒåŒæ—¶å¯¹UIè¿›è¡Œè¿›ä¸€æ­¥çš„ç¾åŒ–å’Œä¼˜åŒ–ï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¿½?
é€šè¿‡æœ¬æ¬¡å®éªŒï¼Œæ·±å…¥ç†è§£äº†Androidåº”ç”¨å¼€å‘çš„æµç¨‹å’Œæœ€ä½³å®è·µï¼Œä¸ºä»Šåè¿›è¡Œæ›´å¤æ‚çš„Androidåº”ç”¨å¼€å‘æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ï¿?
